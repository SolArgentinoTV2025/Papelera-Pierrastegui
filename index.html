<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Papelera Pierrastegui</title>
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/inicio.css">
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
      import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyD9T9Y34jeQUtscNdjn-aZ54B4kEisNk3c",
        authDomain: "papelera-pie.firebaseapp.com",
        projectId: "papelera-pie",
        storageBucket: "papelera-pie.firebasestorage.app",
        messagingSenderId: "407925272882",
        appId: "1:407925272882:web:4ce4347c5cba2e95b4a72b",
        measurementId: "G-YXB9F6CTN0"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth();

      document.addEventListener("DOMContentLoaded", () => {
        onAuthStateChanged(auth, (user) => {
          const authButtons = document.getElementById("auth-buttons");
          const userMenu = document.getElementById("user-menu");

          if (user) {
            document.getElementById("user-name").textContent = user.displayName || "Usuario";
            authButtons.style.display = "none"; // Ocultar botones de login y registro
            userMenu.style.display = "block";   // Mostrar men칰 de usuario
          } else {
            authButtons.style.display = "block"; // Mostrar botones de login y registro
            userMenu.style.display = "none";     // Ocultar men칰 de usuario
          }
        });

        document.getElementById("logout").addEventListener("click", () => {
          signOut(auth).then(() => {
            window.location.href = "index.html"; // Recargar la p치gina tras cerrar sesi칩n
          }).catch((error) => {
            alert("Error al cerrar sesi칩n: " + error.message);
          });
        });
      });
    </script>
</head>
<body>
    <header>
        <h1>Papelera Pierrastegui</h1>
        <nav>
            <ul>
                <li><a href="#">Inicio</a></li>
                <li><a href="#">Cat치logo</a></li>
                <li><a href="#">Contacto</a></li>
            </ul>
        </nav>
        <div id="auth-buttons">
            <button class="logreg" onclick="window.location.href='logueo.html'">Iniciar sesi칩n</button>
            <button class="logreg reg" onclick="window.location.href='registro.html'">Registrarse</button>
        </div>
        <div id="user-menu" style="display:none;">
            <div class="user-icon" onclick="toggleMenu()">
                游녻 <span id="user-name"></span>
            </div>
            <div class="user-dropdown" id="user-dropdown">
                <a href="#">Opciones</a>
                <button id="logout">Cerrar sesi칩n</button>
            </div>
        </div>
        <div class="mpavisoext"><span class="mpaviso">칔NICO MEDIO DE PAGO: MercadoPago</span> <a class="infomdp" href="info/mediodepago">Mas Informaci칩n</a></div>
    </header>
    <main>
        <section id="catalogo">
            <h2>Cat치logo de Productos</h2>
            <div class="productos">
                <!-- Productos aqu칤 -->
            </div>
        </section>
    </main>
    <footer>
        <p>2025 춸 Papelera Pierrastegui</p>
        <p>2025 춸 Sol Argentino TV | Creado por los desarrolladores de Sol Argentino TV</p>
    </footer>
    <script src="assets/js/inicio.js"></script>
    <script>
        function toggleMenu() {
            const dropdown = document.getElementById("user-dropdown");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        }
    </script>
</body>
</html>